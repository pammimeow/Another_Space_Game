package com.jonathantorres.anotherspacegame.utils{	import flash.display.Loader;	import flash.display.MovieClip;	import flash.display.StageAlign;	import flash.display.StageScaleMode;	import flash.events.Event;	import flash.events.ProgressEvent;	import flash.net.URLRequest;	import flash.text.AntiAliasType;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.text.TextFormatAlign;		/**	 * @author Jonathan Torres	 */	[SWF(frameRate="60", width="980", height="440")]	public class Preloader extends MovieClip	{		private var _percentTextFormat:TextFormat;		private var _percentText:TextField;		private var _urlReq:URLRequest;		private var _loader:Loader;				public function Preloader()		{			super();						stage.align = StageAlign.TOP_LEFT;			stage.scaleMode = StageScaleMode.NO_SCALE;			stage.stageFocusRect = false;						_percentTextFormat = new TextFormat();			_percentTextFormat.font = 'Arial';			_percentTextFormat.align = TextFormatAlign.CENTER;			_percentTextFormat.size = 14;			_percentTextFormat.color = 0xFFFFFF;						_percentText = new TextField();			_percentText.defaultTextFormat = _percentTextFormat;			_percentText.selectable = false;			_percentText.multiline = false;			_percentText.width = 200;			_percentText.height = 75;			_percentText.antiAliasType = AntiAliasType.ADVANCED;			_percentText.text = 'Loading: 0%';			_percentText.x = (stage.stageWidth / 2) - (_percentText.width / 2);			_percentText.y = (stage.stageHeight / 2) - (_percentText.height / 2);			addChild(_percentText);						_urlReq = new URLRequest('Main.swf');						_loader = new Loader();			_loader.load(_urlReq);			_loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onLoaderProgress);			_loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaderComplete);		}				protected function onLoaderComplete(event:Event):void		{			addChild(_loader);			removeChild(_percentText);						_loader.contentLoaderInfo.removeEventListener(ProgressEvent.PROGRESS, onLoaderProgress);			_loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, onLoaderComplete);		}				protected function onLoaderProgress(event:ProgressEvent):void		{			var percent:Number = event.bytesLoaded / event.bytesTotal;			_percentText.text = 'Loading: ' + int((percent * 100)) + '%';		}	}}